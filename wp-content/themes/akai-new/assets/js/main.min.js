/*! AKAI New - v0.1.0 - 2014-06-02
 * http://akai.org.pl
 * Copyright (c) 2014; * Licensed GPLv2+ */
function render_map(a){var b=a.querySelectorAll(".marker"),c={zoom:16,center:new google.maps.LatLng(0,0),mapTypeId:google.maps.MapTypeId.ROADMAP},d=new google.maps.Map(a,c);d.markers=[],[].forEach.call(b,function(a){add_marker(a,d)}),center_map(d)}function add_marker(a,b){var c=new google.maps.LatLng(a.dataset.lat,a.dataset.lng),a=new google.maps.Marker({position:c,map:b});if(b.markers.push(a),a.innerHTML){var d=new google.maps.InfoWindow({content:a.innerHTML});google.maps.event.addListener(a,"click",function(){d.open(b,a)})}}function center_map(a){var b=new google.maps.LatLngBounds;a.markers.forEach(function(a){var c=new google.maps.LatLng(a.position.lat(),a.position.lng());b.extend(c)}),1==a.markers.length?(a.setCenter(b.getCenter()),a.setZoom(16)):a.fitBounds(b)}document.addEventListener("DOMContentLoaded",function(){[].forEach.call(document.querySelectorAll(".acf-map"),function(a){render_map(a)})}),function(a){"use strict";var b=a.innerWidth>0?a.innerWidth:screen.width;b>=960&&(document.write('<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/skrollr/0.6.22/skrollr.js"></script>'),document.write('<script type="text/javascript" src="//cdn.jsdelivr.net/skrollr.stylesheets/0.0.4/skrollr.stylesheets.min.js"></script>'),document.addEventListener("DOMContentLoaded",function(){skrollr.init({constants:{smallheaderthird:140/3,smallheaderhalf:70,smallheader:140},forceHeight:!1})}));var c=document.querySelector(".navigation-bar"),d=document.querySelector(".navigation-bar .js-expand"),e=function(a){a.preventDefault(),c.classList.toggle("expanded")};d.addEventListener("click",e),d.addEventListener("touchend",e)}(this,jQuery),function(a,b){"use strict";function c(){var a=this;this.$wrapper=b("#newsletter-bar"),this.isDisabled()||this.show(),this.$wrapper.find(".js-close-button").on("click",function(b){b.preventDefault(),a.disable()}),this.$wrapper.find(".js-back-button").on("click",function(b){b.preventDefault(),a.hideMessage()}),this.$wrapper.find("form").on("submit",function(b){b.preventDefault(),a.submitForm()})}c.prototype.show=function(){b("body").addClass("show-newsletter"),this.$wrapper.show()},c.prototype.hide=function(){this.$wrapper.fadeOut(180,function(){b("body").removeClass("show-newsletter")})},c.prototype.disable=function(){this._setHidingCookie(),this.hide()},c.prototype.isDisabled=function(){return-1!==document.cookie.indexOf("newsletter-bar")},c.prototype.showMessage=function(a,b){this.$wrapper.addClass("has-message"),this.$wrapper.find(".js-message-content").html(a),this.$wrapper.find(".content-message .js-back-button").toggle(!b)},c.prototype.hideMessage=function(){this.$wrapper.removeClass("has-message")},c.prototype.submitForm=function(){var a=this.$wrapper.find('input[type="email"]').val().trim(),c=this;this.showMessage("<i class='fa fa-spin fa-spinner'></i>",!0),b.ajax({url:PATH+"wp-content/themes/akai-new/mailchimp.php",type:"POST",dataType:"json",data:{email:a},success:function(a){console.log(a),"error"!=a.status?(c.showMessage("Na Twój adres e-mail została wysłana prośba o zaakceptowanie newslettera.",!0),setTimeout(function(){c.disable()},3e3)):c.showMessage(a.error)},error:function(a){console.log(a),c.showMessage("Wystąpił błąd łączenia z serwerem.")}})},c.prototype._setHidingCookie=function(){var a=new Date;a.setTime(a.getTime()+31536e6),document.cookie="newsletter-bar=hide; expires="+a.toGMTString()},b(document).ready(function(){a.newsletter=new c})}(this,jQuery);